<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Beat Page</title>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<style>
body{
margin:0;
font-family:Arial;
background:#111;
display:flex;
justify-content:center;
padding:40px 10px;
color:white;
}

.bg{
position:fixed;
inset:0;
background-size:cover;
background-position:center;
filter:blur(70px) brightness(.35);
z-index:-1;
}

.app{
width:420px;
max-width:100%;
background:#0b0b0bcc;
backdrop-filter:blur(25px);
border-radius:28px;
overflow:hidden;
box-shadow:0 30px 80px rgba(0,0,0,.6);
}

.hero{
height:260px;
background-size:cover;
background-position:center;
display:flex;
align-items:flex-end;
padding:20px;
}

.hero h1{margin:0}

.socials{
display:flex;
gap:10px;
padding:14px;
}

.socials a{
background:#ffffff15;
padding:8px 12px;
border-radius:12px;
text-decoration:none;
color:white;
font-size:13px;
}

.beat{
padding:16px;
border-top:1px solid rgba(255,255,255,.05);
}

.buy{
float:right;
}
</style>
</head>

<body>

<div class="bg" id="bg"></div>

<div class="app">

<div class="hero" id="hero">
<div>
<h1 id="artistName">Loading...</h1>
<div id="artistDesc" style="opacity:.7"></div>
</div>
</div>

<div class="socials" id="socials"></div>

<div id="beats"></div>

<div style="text-align:center;padding:14px;opacity:.4;font-size:12px">
Made by BULAVIN
</div>

</div>

<script>

const CSV =
"https://docs.google.com/spreadsheets/d/e/2PACX-1vRaW-Jeexk1nvmxlUTk7TAq2akhZW8eY7OxYkgbNcDFyfcOqfyq17_L4w3xRW8cz14JWME0_Fk29hWs/pub?output=csv";

Papa.parse(CSV,{
download:true,
complete:(res)=>{

const d=res.data;

/* ===== PROFILE ===== */

const name=d[1][0];
const desc=d[1][1];
const photo=d[1][2];
const tg=d[1][3];
const insta=d[1][4];
const yt=d[1][5];
const vk=d[1][6];
const buyLink=d[1][7];

artistName.textContent=name;
artistDesc.textContent=desc;

if(photo){
hero.style.backgroundImage=`url(${photo})`;
bg.style.backgroundImage=`url(${photo})`;
}

/* socials */

const socials=document.getElementById("socials");

[
["TG",tg],
["IG",insta],
["YT",yt],
["VK",vk]
].forEach(([label,link])=>{
if(link){
socials.innerHTML+=`<a href="${link}" target="_blank">${label}</a>`;
}
});

/* ===== BEATS ===== */

const beats=document.getElementById("beats");

for(let i=4;i<d.length;i++){

const r=d[i];
if(!r[0]) continue;

beats.innerHTML+=`
<div class="beat">

<b>${r[0]}</b><br>
<span style="opacity:.6">${r[1]}</span><br><br>

<audio controls src="${r[5]}" style="width:100%"></audio>

<div style="margin-top:8px">
MP3 ${r[2]}₽ | WAV ${r[3]}₽ | EXCL ${r[4]}₽
<button class="buy" onclick="window.open('${buyLink}','_blank')">
Купить
</button>
</div>

</div>`;
}

}
});

</script>
</body>
</html>
