<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Beat Page</title>

<style>
body{
margin:0;
font-family:system-ui;
background:#000;
display:flex;
justify-content:center;
padding:40px 10px;
color:#fff;
overflow-x:hidden;
}

/* BLUR BACKGROUND */
.bg{
position:fixed;
inset:0;
background-size:cover;
background-position:center;
filter:blur(80px) brightness(.4);
z-index:-1;
}

.app{
width:420px;
max-width:100%;
background:rgba(20,20,20,.65);
backdrop-filter:blur(30px);
border-radius:28px;
overflow:hidden;
box-shadow:0 40px 120px rgba(0,0,0,.6);
}

/* HERO */
.hero{
height:260px;
background-size:cover;
background-position:center;
display:flex;
flex-direction:column;
justify-content:flex-end;
padding:20px;
}

.hero::after{
content:"";
position:absolute;
inset:0;
background:linear-gradient(to top,#000,transparent);
}

.hero h1{
margin:0;
z-index:2;
}

.desc{
opacity:.8;
font-size:14px;
margin-top:6px;
}

/* SOCIAL */
.social{
display:flex;
gap:8px;
flex-wrap:wrap;
padding:14px 18px;
}

.social a{
text-decoration:none;
color:#fff;
background:rgba(255,255,255,.08);
padding:8px 14px;
border-radius:12px;
font-size:13px;
}

/* BEATS */
.beats{
padding:10px 14px 20px;
}

.beat{
background:rgba(255,255,255,.06);
border-radius:16px;
padding:14px;
margin-bottom:12px;
}

audio{
width:100%;
margin:8px 0;
}

.row{
display:flex;
justify-content:space-between;
align-items:center;
}

.buy{
background:#fff;
color:#000;
border:none;
padding:6px 14px;
border-radius:999px;
cursor:pointer;
font-weight:600;
}

.footer{
text-align:center;
opacity:.5;
font-size:12px;
padding:14px;
}
</style>
</head>

<body>

<div class="bg" id="bg"></div>

<div class="app">

<div class="hero" id="hero">
<h1 id="name">Loading...</h1>
<div class="desc" id="desc"></div>
</div>

<div class="social" id="social"></div>

<div class="beats" id="beats"></div>

<div class="footer">Made by BULAVIN</div>

</div>

<script>

const CSV_LINK =
"https://docs.google.com/spreadsheets/d/e/2PACX-1vRaW-Jeexk1nvmxlUTk7TAq2akhZW8eY7OxYkgbNcDFyfcOqfyq17_L4w3xRW8cz14JWME0_Fk29hWs/pub?output=csv";

fetch(CSV_LINK)
.then(r=>r.text())
.then(text=>{

const rows=text.trim().split("\n").map(r=>r.split(","));

/* ===== PROFILE ===== */
const profile=rows[1];

const name=profile[0];
const desc=profile[1];
const photo=profile[2];
const tg=profile[3];
const ig=profile[4];
const yt=profile[5];
const vk=profile[6];
const buyLink=profile[7];

document.getElementById("name").textContent=name;
document.getElementById("desc").textContent=desc;

document.getElementById("hero").style.backgroundImage=`url(${photo})`;
document.getElementById("bg").style.backgroundImage=`url(${photo})`;

/* SOCIAL BUTTONS */

const social=document.getElementById("social");

[
["Telegram",tg],
["Instagram",ig],
["YouTube",yt],
["VK",vk]
].forEach(([title,link])=>{
if(link){
const a=document.createElement("a");
a.href=link;
a.target="_blank";
a.textContent=title;
social.appendChild(a);
}
});

/* ===== BEATS ===== */

const beatsDiv=document.getElementById("beats");

rows.slice(4).forEach(r=>{

if(!r[0]) return;

const title=r[0];
const type=r[1];
const mp3=r[2];
const wav=r[3];
const excl=r[4];
const url=r[5];

const el=document.createElement("div");
el.className="beat";

el.innerHTML=`
<b>${title}</b><br>
<small>${type}</small>

<audio controls src="${url}"></audio>

<div class="row">
<div>MP3 ${mp3} | WAV ${wav} | EXCL ${excl}</div>
<button class="buy">Купить</button>
</div>
`;

el.querySelector(".buy").onclick=()=>window.open(buyLink,"_blank");

beatsDiv.appendChild(el);

});

});
</script>

</body>
</html>
