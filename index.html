<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Beat Page</title>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<style>
body{
margin:0;
font-family:Arial;
background:#111;
display:flex;
justify-content:center;
padding:40px 10px;
color:white;
}

.bg{
position:fixed;
inset:0;
background-size:cover;
background-position:center;
filter:blur(60px) brightness(.35);
z-index:-1;
}

.app{
width:420px;
max-width:100%;
background:#0b0b0bcc;
backdrop-filter:blur(25px);
border-radius:28px;
overflow:hidden;
box-shadow:0 30px 80px rgba(0,0,0,.6);
}

.hero{
height:260px;
background-size:cover;
background-position:center;
display:flex;
align-items:flex-end;
padding:20px;
}

.beat{
padding:16px;
border-top:1px solid rgba(255,255,255,.05);
}

button{
background:#ffffff15;
border:none;
padding:8px 14px;
border-radius:12px;
color:white;
cursor:pointer;
}
</style>
</head>

<body>

<div class="bg" id="bg"></div>

<div class="app">
<div class="hero" id="hero">
<div>
<h1 id="artistName">Loading...</h1>
<div id="artistDesc" style="opacity:.7"></div>
</div>
</div>

<div id="beats"></div>

<div style="text-align:center;padding:14px;opacity:.4;font-size:12px">
Made by BULAVIN
</div>
</div>

<script>

const CSV_URL =
"https://docs.google.com/spreadsheets/d/e/2PACX-1vRaW-Jeexk1nvmxlUTk7TAq2akhZW8eY7OxYkgbNcDFyfcOqfyq17_L4w3xRW8cz14JWME0_Fk29hWs/pub?output=csv";

Papa.parse(CSV_URL, {
download: true,
header: false,
complete: function(results){

const data = results.data;

const artistName = data[0][0];
const artistDesc = data[0][1];
const photo = data[0][2];
const buyLink = data[0][3];

document.getElementById("artistName").textContent = artistName;
document.getElementById("artistDesc").textContent = artistDesc;

if(photo){
hero.style.backgroundImage=`url(${photo})`;
bg.style.backgroundImage=`url(${photo})`;
}

const beats=document.getElementById("beats");

for(let i=4;i<data.length;i++){

const row=data[i];
if(!row[0]) continue;

beats.innerHTML += `
<div class="beat">
<b>${row[0]}</b><br>
<span style="opacity:.6">${row[1]}</span><br><br>

<audio controls src="${row[5]}" style="width:100%"></audio>

<div style="margin-top:8px;font-size:13px;opacity:.7">
MP3 ${row[2]}₽ | WAV ${row[3]}₽ | EXCL ${row[4]}₽
</div>

<div style="margin-top:8px">
<button onclick="window.open('${buyLink}','_blank')">
Купить
</button>
</div>
</div>`;
}

}
});

</script>
</body>
</html>
